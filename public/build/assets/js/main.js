const r=document.getElementById("productosGrid"),d=document.getElementById("busqueda");let n=[],a=[];async function l(){n=await(await fetch("https://fakestoreapi.com/products")).json(),i(n.slice(0,6))}function i(o){r.innerHTML="",o.forEach(t=>{const e=document.createElement("div");e.classList.add("product-card"),e.innerHTML=`
            <img src="${t.image}" alt="${t.title}">
            <h4>${t.title}</h4>
        `,e.addEventListener("click",()=>{a.includes(t.id)?(a=a.filter(s=>s!==t.id),e.classList.remove("selected")):a.length<4?(a.push(t.id),e.classList.add("selected")):alert("Máximo 4 productos seleccionados")}),r.appendChild(e)})}d.addEventListener("keyup",o=>{const t=o.target.value.toLowerCase(),e=n.filter(s=>s.title.toLowerCase().includes(t));i(e.slice(0,6))});l();const c=document.getElementById("formularioDatos");c.addEventListener("submit",async o=>{o.preventDefault();const t={nombre:document.getElementById("nombre").value,ocupacion:document.getElementById("ocupacion").value,correo:document.getElementById("correo").value,edad:document.getElementById("edad").value};try{const s=await(await fetch("/api/contacto",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();Swal.fire({icon:"success",title:"¡Perfecto!",text:s.mensaje||"Datos enviados correctamente",confirmButtonColor:"#007bff"}),c.reset()}catch(e){console.error("Error al enviar datos:",e),Swal.fire({icon:"error",title:"Oops...",text:"Hubo un error al enviar los datos",confirmButtonColor:"#d33"})}});
