const s=localStorage.getItem("token");s&&(window.location.href="/perfil");const r=document.querySelector("#togglePassword"),n=document.querySelector("#contrasenia");r.addEventListener("click",()=>{const o=n.type==="password"?"text":"password";n.type=o,r.classList.toggle("fa-eye"),r.classList.toggle("fa-eye-slash")});const i=document.getElementById("formularioDatos");i.addEventListener("submit",async o=>{o.preventDefault();const a={correo:document.getElementById("correo").value.trim(),contrasenia:document.getElementById("contrasenia").value};try{const e=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await e.json();if(e.status===422){Swal.fire({icon:"warning",title:"Error",text:t.mensaje,confirmButtonColor:"#f0ad4e"});return}if(!e.ok){Swal.fire({icon:"error",title:"Oops...",text:t.mensaje||"Error al iniciar sesión",confirmButtonColor:"#d33"});return}localStorage.setItem("token",t.token),Swal.fire({icon:"success",title:"¡Bienvenido!",text:t.mensaje,confirmButtonColor:"#007bff"}).then(()=>{window.location.href="/perfil"})}catch(e){console.error("Error al enviar datos:",e),Swal.fire({icon:"error",title:"Oops...",text:"Hubo un error al enviar los datos",confirmButtonColor:"#d33"})}});
